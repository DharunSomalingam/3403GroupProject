{% extends 'base.html' %}
{% block title %}Medical Documents{% endblock %}
{% block content %}

<div class="container py-4"> <!-- This page was written by the team member: Siena  -->
  <div class="text-center mb-4">
    <h1 class="purple-text" style="font-size: 2.8rem;">Your Medical Documents</h1>
    <div class="d-flex justify-content-center gap-3 mt-3">
      <button class="btn btn-purple-calender shadow-sm fw-bold px-4 py-2"
        onclick="location.href='/medical_document/upload_document'">
        + Upload New Document
      </button>
      <button class="btn btn-purple-calender shadow-sm fw-bold px-4 py-2"
        onclick="location.href='/medical_document/share_document'">
        ‚Üê Share Your Documents
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <form method="get" action="/documents/search" class="mb-4">
      <div class="row g-2">
          <div class="col-md-4">
              <input type="text" name="q" class="form-control" placeholder="Search documents (name or notes)">
          </div>
          <div class="col-md-3">
              <input type="text" name="type" class="form-control" placeholder="Document type">
          </div>
          <div class="col-md-3">
              <input type="date" name="expiration" class="form-control">
          </div>
          <div class="col-md-2">
              <button type="submit" class="btn btn-purple-calender w-100">Search</button>
          </div>
      </div>
  </form>

  <div class="d-flex justify-content-center align-items-center gap-2 mb-4">
    <label for="sortDocs" class="fw-semibold mb-0">Order your documents by</label>
    <select id="sortDocs" class="form-select w-auto">
      <option value="upload-asc">date uploaded ‚Üë</option>
      <option value="upload-desc">date uploaded ‚Üì</option>
      <option value="expiry-asc">expiration ‚Üë</option>
      <option value="expiry-desc">expiration ‚Üì</option>
    </select>
    <button class="btn btn-purple-calender px-4">Display</button>
  </div>

  {% if documents %}
    <p class="text-center text-muted">{{ documents|length }} document(s) found</p>
  {% else %}
    <p class="text-center text-danger">No matching documents found.</p>
  {% endif %}

  <!-- Scrollable timetable-style table -->
  <div class="scrollable-timetable table-responsive shadow-sm rounded mb-5">
    <table class="table align-middle table-borderless table-outline-dark shadow-sm rounded text-center">
      <thead class="table-outline-dark">
        <tr>
          <th>Document</th>
          <th>Practitioner</th>
          <th>Type</th>
          <th>Uploaded</th>
          <th>Expiration</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% if documents %}
        <p class="text-muted mb-2">{{ documents|length }} document(s) found</p>
    
        {% for doc in documents %}
        <tr class="rostercells">
            <td>üìÑ {{ doc.document_name }}</td>
            <td>{{ doc.practitioner_name }}</td>
            <td>{{ doc.document_type }}</td>
            <td>{{ doc.upload_date.strftime('%d/%m/%Y') }}</td>
            <td>{{ doc.expiration_date.strftime('%d/%m/%Y') if doc.expiration_date else 'N/A' }}</td>
            <td>
                <button class="btn btn-purple-calender btn-sm me-1"
                    onclick="location.href='/medical_document/edit_document'">Edit</button>
                <button class="btn btn-Appointment btn-sm me-1">Download</button>
                <button class="btn btn-Missed btn-sm">Delete</button>
            </td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td colspan="6" class="text-center text-muted">No documents found.</td>
        </tr>
        {% endif %}
    </tbody>
    </table>
  </div>
</div>

{% endblock %}